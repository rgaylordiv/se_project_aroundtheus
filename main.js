!function(){"use strict";class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){this._errorElement=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorElement.textContent=this._errorMessage,this._errorElement.classList.add(this._errorClass)}_hideInputError(e){this._errorElement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):(this._errorMessage=e.validationMessage,this._showInputError(e,this._errorMessage))}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t,s,r,i,o){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteButton=r,this._handleCardLike=i,this._handelCardDislike=o,this._id=e._id,this._isLiked=e.isLiked}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._isLiked?this._handelCardDislike(this):this._handleCardLike(this)})),this._deleteButton.addEventListener("click",(()=>{console.log("trash clicked"),this._handleDeleteButton(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({link:this._link,name:this._name,src:this._link})}))}removeCard(){this._element.remove(),this._element=null}cardIsLiked(e){this._isLiked=e,this.showLikes()}showLikes(){this._isLiked?this._likeButton.classList.add("active"):this._likeButton.classList.remove("active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._modal=document.querySelector(".modal"),this._likeButton=this._element.querySelector(".card__button"),this._deleteButton=this._element.querySelector(".card__trash"),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.setAttribute("src",this._link),this._cardImage.alt=this._name,this._cardTitle=this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this.showLikes(),this._element}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){console.log("closing modal"),this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{console.log(`${e}`),"Escape"===e.key&&this.close()};setEventListeners(){console.log("Setting event listeners"),this._popupElement.addEventListener("click",(e=>{console.log(`Clicked element: ${e.target.className}`),(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class r extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupElement.querySelectorAll(".modal__form-input"),this._submitBtn=this._popupElement.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){return this._formValue={},this._inputList.forEach((e=>{console.log(`Input Name: ${e.name}, Input Value: ${e.value}`),this._formValue[e.name]=e.value})),this._formValue}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)})),super.setEventListeners()}}document.querySelector(".modal"),document.querySelector("#profile");const i=document.forms["edit-form"],o=document.forms["add-form"],n=document.forms["profile-form"],l=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__name"),c=document.querySelector(".profile__bio"),h=document.querySelector("#profile-name-input"),d=document.querySelector("#profile-bio-input"),u=document.querySelector(".profile__add-button"),_=(o.querySelector(".modal__input_type_title"),o.querySelector(".modal__input_type_url"),document.querySelector(".profile__image-edit")),m=document.querySelector(".profile__image"),p=(document.querySelector("#profile-image-url-input"),document.querySelector(".cards__list"),document.querySelector("#card-template"),document.querySelector(".card"),document.querySelector(".card__button"),document.querySelector("#delete-button"),document.querySelector("#delete"),document.querySelector("#image").querySelector(".modal__image"),document.querySelector(".modal__description"),new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}updateProfileInfo(e,t){return console.log(`Updating profile with name: ${e}, about: ${t}`),fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse).then((e=>(console.log("API response:",e),e)))}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}createCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return console.log("Deleting card with ID:",e),fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"2d74b34c-f524-4ec8-a70b-ae8ff175319b","Content-Type":"application/json"}})),f=new class{constructor(e,t){let{items:s,renderer:r}=e;this.items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this.items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=B(e);f.addItem(t)}},".cards__list"),g=new class{constructor(e,t,s){this._profileName=e,this._profileBio=t,this._profileImage=s}getUserInfo(){return{name:this._profileName.textContent,job:this._profileBio.textContent,image:this._profileImage.src}}setUserInfo(e,t){console.log(`Setting user info - Name: ${e}, Bio: ${t}`),console.log(this._profileName),console.log(this._profileBio),this._profileName.textContent=e,console.log(`Updating name: ${e}`),this._profileBio.textContent=t,console.log(`Updating bio: ${t}`)}setUserPicture(e){this._profileImage.src=e}}(a,c,m);p.getUserInfo().then((e=>{console.log(e);const t=e.name,s=e.about,r=e.avatar;console.log(t),console.log(s),g.setUserInfo(t,s),g.setUserPicture(r)})).catch((e=>{console.error(e)})),p.getInitialCards().then((e=>{f.items=e,f.renderItems()})).catch((e=>{console.error(e)}));const S=new class extends s{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image"),this._imageTitle=this._popupElement.querySelector(".modal__description")}open(e){this._image.src=e.link,this._image.alt=e.name,this._imageTitle.textContent=e.name,super.open()}}("#image");S.setEventListeners();const E=new r("#edit",(function(e){const t=e.name,s=e.bio;console.log(t),console.log(s),A((function(){return p.updateProfileInfo(t,s).then((()=>{g.setUserInfo(t,s),i.reset()}))}),E)}));E.setEventListeners();const b=new r("#add",(function(e){A((function(){return p.createCard({name:e.title,link:e.image}).then((e=>{!function(e){const t=B(e);f.addItem(t)}(e),b.close(),o.reset()}))}),b)}));b.setEventListeners();const v=new r("#profile",(function(e){A((function(){return p.updateAvatar(e.avatar).then((()=>{g.setUserPicture(e.avatar),v.close(),n.reset()}))}),v)}));v.setEventListeners();const L=new class extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._deleteSubmit=this._popupElement.querySelector("form"),this._deleteSubmitHandler=this._handleDeleteSubmit.bind(this)}open(){super.open(),this._popupElement.querySelector(".modal__button").focus()}setEventListeners(){super.setEventListeners(),this._deleteSubmit.addEventListener("submit",this._deleteSubmitHandler)}_handleDeleteSubmit(e){console.log("this is working"),e.preventDefault(),this._handleFormSubmit()}setSubmitAction(e){this._handleFormSubmit=e}}("#delete",x);L.setEventListeners();const y={};var k;k={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"},Array.from(document.querySelectorAll(k.formSelector)).forEach((t=>{const s=new e(k,t),r=t.getAttribute("id");y[r]=s,s.enableValidation()}));const C=y["edit-form"],I=y["add-form"],q=y["profile-form"];function B(e){return console.log(e),new t(e,"#card-template",U,T,$,w).getView()}function U(e){S.open(e)}function $(e){p.likeCard(e._id).then((()=>{e.cardIsLiked(!0)})).catch((e=>{console.log(e)}))}function w(e){p.dislikeCard(e._id).then((()=>{e.cardIsLiked(!1)})).catch((e=>{console.error(e)}))}function A(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.renderLoading(!0,s),e().then((()=>{t.close()})).catch(console.error).finally((()=>{t.renderLoading(!1)}))}function T(e){L.open(),L.setSubmitAction((()=>x(e)))}function x(e){console.log("Card ID for deletion:",e._id),p.deleteCard(e._id).then((()=>{e.removeCard(),L.close()})).catch((e=>{console.error(e)}))}l.addEventListener("click",(()=>{const e=g.getUserInfo();h.value=e.name,d.value=e.job,E.open(),C.toggleButtonState()})),u.addEventListener("click",(function(){b.open(),I.toggleButtonState()})),_.addEventListener("click",(()=>{v.open(),q.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixFQUFrQjlHLE9BQ2xCOEcsRUFBa0JLLGlCQUFnQixJQUFNRSxFQUF5QjlKLElBQ3JFLENBRUEsU0FBUzhKLEVBQXlCUyxHQUM5Qm5KLFFBQVFDLElBQUksd0JBQXlCa0osRUFBS3hKLEtBQ3RDaUUsRUFBSTJCLFdBQVc0RCxFQUFLeEosS0FDbkJpRixNQUFLLEtBQ0Z1RSxFQUFLL0ksYUFDTCtILEVBQWtCN0csT0FBTyxJQUU1QjRGLE9BQU9DLElBQ0puSCxRQUFRb0gsTUFBTUQsRUFBSSxHQUUxQixDQU9KL0QsRUFBWTdFLGlCQUFpQixTQUFTLEtBRWxDLE1BQU1tSixFQUFXaEIsRUFBUzdCLGNBQzFCdEIsRUFBZ0JoQixNQUFRbUYsRUFBU3ZJLEtBQ2pDcUUsRUFBZWpCLE1BQVFtRixFQUFTWixJQUNoQ1csRUFBY3BHLE9BQ2QwSCxFQUFrQmpMLG1CQUFtQixJQUt6QzJGLEVBQVVsRixpQkFBaUIsU0FBUyxXQUNoQ3VKLEVBQWF6RyxPQUNiMkgsRUFBaUJsTCxtQkFDckIsSUFJQTRGLEVBQWlCbkYsaUJBQWlCLFNBQVMsS0FDdkMySixFQUFrQjdHLE9BQ2xCNEgsRUFBcUJuTCxtQkFBbUIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpe1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7IFxyXG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpOyBcclxuICAgICAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KXtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgdGhpcy5fZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCl7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTsgLy9cclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7IC8vXHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTsgLy9cclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTsgLy9cclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlRGVsZXRlQnV0dG9uLCBoYW5kbGVDYXJkTGlrZSwgaGFuZGxlQ2FyZERpc2xpa2UpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbiA9IGhhbmRsZURlbGV0ZUJ1dHRvbjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRlbENhcmREaXNsaWtlID0gaGFuZGxlQ2FyZERpc2xpa2U7XHJcbiAgICAgICAgLy90aGlzLl9kZWxldGVTdWJtaXRIYW5kbGVyID0gdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0LmJpbmQodGhpcyk7Ly8gQmluZCBoZXJlXHJcbiAgICAgICAgLy90aGlzLl9pbWFnZVN1Ym1pdEhhbmRsZXIgPSB0aGlzLl9oYW5kbGVJbWFnZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYodGhpcy5faXNMaWtlZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kZWxDYXJkRGlzbGlrZSh0aGlzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyYXNoIGNsaWNrZWQnKTtcclxuICAgICAgICAgICAgLy90aGlzLl9tb2RhbERlbGV0ZS5jbGFzc0xpc3QuYWRkKCdtb2RhbF9vcGVuZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKHRoaXMpO1xyXG4gICAgICAgICAgICAvL2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmVzY1ByZXNzLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAvL3RoaXMuX2RlbGV0ZVN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9kZWxldGVTdWJtaXRIYW5kbGVyKTtcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICAgICAgICAgIGxpbms6IHRoaXMuX2xpbmssIFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcclxuICAgICAgICAgICAgICAgIHNyYzogdGhpcy5fbGlua1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vbW9kYWxzIG5lZWQgdG8gYmUgY3JlYXRlZCB1c2luZyBQb3B1cCBhbmQgdGhlIHN1Ym1pdCBoYW5kbGVyXHJcbiAgICAvL3Nob3VsZCBiZSBhZGRlZCBpbnNpZGUgdGhlIGNsYXNzXHJcblxyXG4gICAgcmVtb3ZlQ2FyZCgpe1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY2FyZElzTGlrZWQoaXNMaWtlZCkge1xyXG4gICAgICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgICAgIHRoaXMuc2hvd0xpa2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0xpa2VzKCl7XHJcbiAgICAgICAgaWYodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0VmlldygpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9tb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19idXR0b24nKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaCcpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fbGluaylcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuc2hvd0xpa2VzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwe1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3Blbigpe1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpOyBcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2Nsb3NpbmcgbW9kYWwnKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+e1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke2V2dH1gKTtcclxuICAgICAgICBpZihldnQua2V5ID09PSBcIkVzY2FwZVwiKXtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIGV2ZW50IGxpc3RlbmVycycpOyAvLyBEZWJ1ZyBsb2dcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDbGlja2VkIGVsZW1lbnQ6ICR7ZXZ0LnRhcmdldC5jbGFzc05hbWV9YCk7IC8vIERlYnVnIGxvZ1xyXG4gICAgICAgICAgICBpZihldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19jbG9zZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpe1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19mb3JtLWlucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKXtcclxuICAgICAgICB0aGlzLl9mb3JtVmFsdWUgPSB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBJbnB1dCBOYW1lOiAke2lucHV0Lm5hbWV9LCBJbnB1dCBWYWx1ZTogJHtpbnB1dC52YWx1ZX1gKTtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9jcmVhdGUgYSByZW5kZXJMb2FkaW5nIG1ldGhvZCAtIHNlZSByZXZpZXdlciByZWNvbW1lbmRhdGlvblxyXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0PSdTYXZpbmcuLi4nKSB7XHJcbiAgICAgICAgaWYoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ0blRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1WYWx1ZXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbn0iLCIvL0ltcG9ydHNcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgY29uZmlnIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcbi8vXHJcblxyXG4vL01vZGFsXHJcbmNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7IC8vXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZScpOyAvL1xyXG4vL1xyXG5cclxuLy9Gb3JtIEVsZW1lbnRzXHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1mb3JtJ107XHJcbmNvbnN0IGFkZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbJ2FkZC1mb3JtJ107XHJcbmNvbnN0IHByb2ZpbGVJbWFnZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbJ3Byb2ZpbGUtZm9ybSddO1xyXG4vL1xyXG5cclxuLy9FZGl0IEZvcm1cclxuY29uc3QgZWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmNvbnN0IHByb2ZpbGVCaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYmlvJyk7XHJcbmNvbnN0IHByb2ZpbGVFZGl0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1iaW8taW5wdXRcIik7XHJcbi8vXHJcblxyXG4vL0FkZCBGb3JtXHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3R5cGVfdGl0bGUnKTsgLy9cclxuY29uc3QgY2FyZEltYWdlSW5wdXQgPSBhZGRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3R5cGVfdXJsJyk7IC8vXHJcbi8vXHJcblxyXG4vL1Byb2ZpbGUgSW1hZ2UgRm9ybVxyXG5jb25zdCBwcm9maWxlSW1hZ2VFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlLWVkaXQnKTtcclxuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtaW1hZ2UtdXJsLWlucHV0Jyk7IC8vXHJcbi8vXHJcblxyXG4vL0xpc3RcclxuY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpOyAvL1xyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpOyAvL1xyXG5jb25zdCBjYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKTsgLy9cclxuLy9cclxuXHJcbi8vQ2FyZFxyXG5jb25zdCBsaWtlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbicpOyAvL1xyXG4vL2NvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkX190cmFzaCcpOyAvL1xyXG5jb25zdCBkZWxldGVCdXR0b25TdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVsZXRlLWJ1dHRvbicpOyAvL1xyXG5jb25zdCBtb2RhbERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZWxldGUnKTsgLy9cclxuLy9cclxuXHJcbi8vSW1hZ2UgRGlzcGxheVxyXG5jb25zdCBtb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ltYWdlJyk7XHJcbmNvbnN0IHByZXZpZXdJbWFnZSA9IG1vZGFsSW1hZ2UucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpOyAvL1xyXG5jb25zdCBtb2RhbFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19kZXNjcmlwdGlvbicpOyAvL1xyXG4vL1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbi8vQXBpXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiMmQ3NGIzNGMtZjUyNC00ZWM4LWE3MGItYWU4ZmYxNzUzMTliXCIsXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgIH1cclxufSk7XHJcbi8vXHJcblxyXG4vL1NlY3Rpb25cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgey8qaXRlbXM6IGluaXRpYWxDYXJkcywqL3JlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmREYXRhKTtcclxuICAgICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpXHJcbiAgICAgfX0sXHJcbiAgICAnLmNhcmRzX19saXN0J1xyXG4pO1xyXG4vL1xyXG5cclxuLy9Vc2VySW5mb1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUJpbywgcHJvZmlsZUltYWdlKTtcclxuLy9cclxuXHJcbmFwaVxyXG4gICAgLmdldFVzZXJJbmZvKClcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vL3Rha2UgdGhpcyBvdXQgdGhpcyB3YXMgdG8gbWFrZSBzdXJlIHJpZ2h0IHRoaW5nIHdhcyBiZWluZyBjYWxsZWRcclxuICAgICAgICBjb25zdCBuYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGpvYiA9IGRhdGEuYWJvdXQ7XHJcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBkYXRhLmF2YXRhclxyXG4gICAgICAgIGNvbnNvbGUubG9nKG5hbWUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGpvYik7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgam9iKTtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VyUGljdHVyZShpbWFnZSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG5cclxuLyphcGlcclxuICAgIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gICAgLnRoZW4oKHJlcykgPT4geyAvL21pZ2h0IG5lZWQgcGFyYW1ldGVyIG9mIHJlcywgaWYgc28gcmVwbGFjZSBpbml0aWFsQ2FyZHMgd2l0aCByZXNcclxuICAgICAgICBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgICAgICAgIHtpdGVtczogcmVzLCByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmREYXRhKTtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudClcclxuICAgICAgICAgICAgfX0sXHJcbiAgICAgICAgICAgICcuY2FyZHNfX2xpc3QnXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTsqL1xyXG5cclxuYXBpXHJcbiAgICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAgIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgICAgIC8qY2FyZHMuZm9yRWFjaChjYXJkRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZERhdGEpOyAvL3VzZSByZW5kZXJJdGVtcyhzZWN0aW9uKVxyXG4gICAgICAgIH0pOyovXHJcbiAgICAgICAgc2VjdGlvbi5pdGVtcyA9IGNhcmRzO1xyXG4gICAgICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuLy9Qb3B1cFdpdGhJbWFnZVxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI2ltYWdlJyk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vXHJcblxyXG4vL1BvcHVwV2l0aEZvcm0gLSBFZGl0XHJcbmNvbnN0IHBvcHVwRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnI2VkaXQnLCBoYW5kbGVQcm9maWxlRWRpdFN1bWJpdCk7XHJcbnBvcHVwRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy9cclxuXHJcbi8vUG9wdXBXaXRoRm9ybSAtIEFkZFxyXG5jb25zdCBwb3B1cEFkZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnI2FkZCcsIGhhbmRsZVByb2ZpbGVBZGRTdWJtaXQpO1xyXG5wb3B1cEFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy9cclxuXHJcbi8vUG9wdXBXaXRoRm9ybSAtIFByb2ZpbGVcclxuY29uc3QgcG9wdXBQcm9maWxlSW1hZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybSgnI3Byb2ZpbGUnLCBoYW5kbGVQcm9maWxlSW1hZ2VTdWJtaXQpO1xyXG5wb3B1cFByb2ZpbGVJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vL1xyXG5cclxuLy9Qb3B1cCAtIERlbGV0ZSBCdXR0b25cclxuY29uc3QgcG9wdXBEZWxldGVCdXR0b24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcjZGVsZXRlJywgaGFuZGxlRGVsZXRlQnV0dG9uU3VibWl0KTsgLy9jcmVhdGUgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZvciBtYW5hZ2luZyB0aGlzIG1vZGFsXHJcbnBvcHVwRGVsZXRlQnV0dG9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbi8vXHJcblxyXG4vL0Zvcm0gVmFsaWRhdG9yXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzPSB7fTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG4vL1RvIHRvZ2dsZSB0aGUgJ2NyZWF0ZScgYnV0dG9uIG9uIGVhY2ggY2xpY2sgb2YgdGhlIGFkZCBtb2RhbFxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3JzWydlZGl0LWZvcm0nXTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3JzWydhZGQtZm9ybSddO1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3JzWydwcm9maWxlLWZvcm0nXTtcclxuLy9cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGRhdGEpO1xyXG4gICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKGNhcmREYXRhKTtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgJyNjYXJkLXRlbXBsYXRlJywgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlQ2FyZERlbGV0ZSwgaGFuZGxlQ2FyZExpa2UsIGhhbmRsZUNhcmREaXNsaWtlKTtcclxuICAgIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0Vycm9yTWVzc2FnZShlcnIpeyAvL1xyXG4gICAgY29uc3QgbWVzc2FnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xyXG4gICAgbWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBgRXJyb3I6ICR7ZXJyfWA7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IEhhbmRsZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XHJcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGNhcmREYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCl7XHJcbiAgICBhcGlcclxuICAgICAgICAubGlrZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmNhcmRJc0xpa2VkKHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZERpc2xpa2UoY2FyZCkge1xyXG4gICAgYXBpXHJcbiAgICAgICAgLmRpc2xpa2VDYXJkKGNhcmQuX2lkKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5jYXJkSXNMaWtlZChmYWxzZSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChyZXF1ZXN0LCBwb3B1cEluc3RhbmNlLCBsb2FkaW5nVGV4dCA9ICdTYXZpbmcuLi4nKXtcclxuICAgIHBvcHVwSW5zdGFuY2UucmVuZGVyTG9hZGluZyh0cnVlLCBsb2FkaW5nVGV4dCk7XHJcbiAgICByZXF1ZXN0KClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKSAvL2NhbiBhZGQgc2hvd0Vycm9yTWVzc2FnZSgpIGhlcmUgaWYgd2FudGVkXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cEluc3RhbmNlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1bWJpdCAodXNlckRhdGEpIHtcclxuICAgIGNvbnN0IG5hbWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgY29uc3Qgam9iID0gdXNlckRhdGEuYmlvO1xyXG4gICAgY29uc29sZS5sb2cobmFtZSk7XHJcbiAgICBjb25zb2xlLmxvZyhqb2IpO1xyXG4gICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKXtcclxuICAgICAgICByZXR1cm4gYXBpLnVwZGF0ZVByb2ZpbGVJbmZvKG5hbWUsIGpvYilcclxuICAgICAgICAvKi50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRVc2VySW5mbygpO1xyXG4gICAgICAgIH0pKi9cclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGpvYik7XHJcbiAgICAgICAgICAgIC8vcG9wdXBFZGl0Rm9ybS5jbG9zZSgpOyBub3QgbmVlZGVkIGJlY2F1c2UgaXQgaXMgZG9uZSB3aXRoIGhhbmRsZVN1Ym1pdFxyXG4gICAgICAgICAgICBwcm9maWxlRWRpdEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvKi5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHNob3dFcnJvck1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0pKi9cclxuICAgIH1cclxuICAgIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgcG9wdXBFZGl0Rm9ybSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVBZGRTdWJtaXQgKGZvcm1WYWx1ZSkge1xyXG4gICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5jcmVhdGVDYXJkKHtuYW1lOiBmb3JtVmFsdWUudGl0bGUsIGxpbms6IGZvcm1WYWx1ZS5pbWFnZX0pXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgcmVuZGVyQ2FyZChkYXRhKTtcclxuICAgICAgICAgICAgcG9wdXBBZGRGb3JtLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGFkZEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyouY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KSovXHJcbiAgICB9XHJcbiAgICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIHBvcHVwQWRkRm9ybSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVJbWFnZVN1Ym1pdCh1c2VyRGF0YSkge1xyXG4gICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKXtcclxuICAgICAgICByZXR1cm4gYXBpLnVwZGF0ZUF2YXRhcih1c2VyRGF0YS5hdmF0YXIpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VyUGljdHVyZSh1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgICAgICAgICBwb3B1cFByb2ZpbGVJbWFnZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICBwcm9maWxlSW1hZ2VGb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLyouY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KSovXHJcbiAgICB9XHJcbiAgICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIHBvcHVwUHJvZmlsZUltYWdlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShkYXRhKXtcclxuICAgIC8vaGFuZGxlRGVsZXRlQnV0dG9uU3VibWl0KGRhdGEpO1xyXG4gICAgcG9wdXBEZWxldGVCdXR0b24ub3BlbigpO1xyXG4gICAgcG9wdXBEZWxldGVCdXR0b24uc2V0U3VibWl0QWN0aW9uKCgpID0+IGhhbmRsZURlbGV0ZUJ1dHRvblN1Ym1pdChkYXRhKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ1dHRvblN1Ym1pdChjYXJkKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2FyZCBJRCBmb3IgZGVsZXRpb246JywgY2FyZC5faWQpOyAvLyBEZWJ1ZyBsb2dcclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLl9pZClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpOyAvLyBSZW1vdmUgY2FyZCBmcm9tIERPTVxyXG4gICAgICAgICAgICBwb3B1cERlbGV0ZUJ1dHRvbi5jbG9zZSgpOyAvLyBDbG9zZSB0aGUgZGVsZXRlIHBvcHVwXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuLy9FZGl0IEZvcm0gRXZlbnRzXHJcbmVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAvL3JldHVybiB0aGUgZGVmYXVsdCBidXR0b24gb25seSBpbiBibG9ja3MgZmluYWxseVxyXG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgcHJvZmlsZUVkaXROYW1lLnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICAgIHByb2ZpbGVFZGl0QmlvLnZhbHVlID0gdXNlckRhdGEuam9iO1xyXG4gICAgcG9wdXBFZGl0Rm9ybS5vcGVuKCk7XHJcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuLy9cclxuXHJcbi8vQWRkIEZvcm0gRXZlbnRzXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBwb3B1cEFkZEZvcm0ub3BlbigpO1xyXG4gICAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuLy9cclxuXHJcbi8vUHJvZmlsZSBJbWFnZSBGb3JtXHJcbnByb2ZpbGVJbWFnZUVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBwb3B1cFByb2ZpbGVJbWFnZS5vcGVuKCk7XHJcbiAgICBwcm9maWxlRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KVxyXG4vL1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGhlYWRlcnN9KXtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpe1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgICB9IC8vXHJcblxyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgdXBkYXRlUHJvZmlsZUluZm8obmFtZSwgYWJvdXQpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBVcGRhdGluZyBwcm9maWxlIHdpdGggbmFtZTogJHtuYW1lfSwgYWJvdXQ6ICR7YWJvdXR9YCk7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQVBJIHJlc3BvbnNlOicsIGRhdGEpOyAgLy8gTG9nIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSAvL1xyXG5cclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXIpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgYXZhdGFyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH0gLy9cclxuXHJcbiAgICBjcmVhdGVDYXJkKHtuYW1lLCBsaW5rfSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgIGxpbmssXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfSAvL1xyXG5cclxuICAgIGRlbGV0ZUNhcmQoY2FyZElEKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnRGVsZXRpbmcgY2FyZCB3aXRoIElEOicsIGNhcmRJRCk7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH0gLy9cclxuXHJcbiAgICBsaWtlQ2FyZChjYXJkSUQpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9IC8vXHJcblxyXG4gICAgZGlzbGlrZUNhcmQoY2FyZElEKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfSAvL1xyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbntcclxuICAgIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKXtcclxuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShlbGVtZW50KXtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlQmlvLCBwcm9maWxlSW1hZ2Upe1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gcHJvZmlsZU5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZUJpbyA9IHByb2ZpbGVCaW87XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZUltYWdlID0gcHJvZmlsZUltYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCl7XHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgam9iOiB0aGlzLl9wcm9maWxlQmlvLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBpbWFnZTogdGhpcy5fcHJvZmlsZUltYWdlLnNyYyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKG5hbWUsIGpvYil7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFNldHRpbmcgdXNlciBpbmZvIC0gTmFtZTogJHtuYW1lfSwgQmlvOiAke2pvYn1gKTsgLy8gTG9nIG5hbWUgYW5kIGpvYlxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3Byb2ZpbGVOYW1lKTsgLy8gRW5zdXJlIHRoaXMgaXMgdGhlIGNvcnJlY3QgZWxlbWVudFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX3Byb2ZpbGVCaW8pOyAgLy8gRW5zdXJlIHRoaXMgaXMgdGhlIGNvcnJlY3QgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgVXBkYXRpbmcgbmFtZTogJHtuYW1lfWApO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVCaW8udGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFVwZGF0aW5nIGJpbzogJHtqb2J9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlclBpY3R1cmUoaW1hZ2Upe1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVJbWFnZS5zcmMgPSBpbWFnZTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Rlc2NyaXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KXtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9kZWxldGVTdWJtaXQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpOyBcclxuICAgICAgICB0aGlzLl9kZWxldGVTdWJtaXRIYW5kbGVyID0gdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0LmJpbmQodGhpcyk7Ly8gQmluZCBoZXJlXHJcbiAgICB9XHJcblxyXG4gICAgb3Blbigpe1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24nKS5mb2N1cygpOy8vc2V0cyBmb2N1cyBvbiB0aGUgYnV0dG9uXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZVN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9kZWxldGVTdWJtaXRIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRGVsZXRlU3VibWl0KGV2dCkgeyAvL2RlbGV0ZSB0aGlzXHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgd29ya2luZycpO1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGRlZmF1bHQgZGVsZXRlIHN1Ym1pc3Npb25cclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICAgICAgLy90aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgLy90aGlzLl9kZWxldGVTdWJtaXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fZGVsZXRlU3VibWl0SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbil7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcclxuICAgIH1cclxufSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgICB9LFxyXG4gICAgXTtcclxuXHJcbiAgICBleHBvcnQgY29uc3QgY29uZmlnID0gKHtcclxuICAgICAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICAgICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICAgICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gICAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiXHJcbiAgICAgIH0pOyJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJfZXJyb3JNZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVCdXR0b24iLCJoYW5kbGVDYXJkTGlrZSIsImhhbmRsZUNhcmREaXNsaWtlIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVDYXJkTGlrZSIsIl9oYW5kZWxDYXJkRGlzbGlrZSIsIl9pZCIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsImNvbnNvbGUiLCJsb2ciLCJfY2FyZEltYWdlIiwic3JjIiwicmVtb3ZlQ2FyZCIsIl9lbGVtZW50IiwiY2FyZElzTGlrZWQiLCJzaG93TGlrZXMiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX21vZGFsIiwiYWx0IiwiX2NhcmRUaXRsZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY2xhc3NOYW1lIiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX3N1Ym1pdEJ0biIsIl9zdWJtaXRCdG5UZXh0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZSIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImZvcm1WYWx1ZXMiLCJwcm9maWxlRWRpdEZvcm1FbGVtZW50IiwiZm9ybXMiLCJhZGRGb3JtRWxlbWVudCIsInByb2ZpbGVJbWFnZUZvcm1FbGVtZW50IiwiZWRpdFByb2ZpbGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVCaW8iLCJwcm9maWxlRWRpdE5hbWUiLCJwcm9maWxlRWRpdEJpbyIsImFkZEJ1dHRvbiIsInByb2ZpbGVJbWFnZUVkaXQiLCJwcm9maWxlSW1hZ2UiLCJhcGkiLCJfcmVmIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0VXNlckluZm8iLCJ1cGRhdGVQcm9maWxlSW5mbyIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVBdmF0YXIiLCJhdmF0YXIiLCJjcmVhdGVDYXJkIiwiX3JlZjIiLCJkZWxldGVDYXJkIiwiY2FyZElEIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsImF1dGhvcml6YXRpb24iLCJzZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmREYXRhIiwiY2FyZEVsZW1lbnQiLCJnZXRDYXJkRWxlbWVudCIsInVzZXJJbmZvIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVCaW8iLCJfcHJvZmlsZUltYWdlIiwiam9iIiwiaW1hZ2UiLCJzZXRVc2VySW5mbyIsInNldFVzZXJQaWN0dXJlIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImNhcmRzIiwicG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2UiLCJfaW1hZ2VUaXRsZSIsInBvcHVwRWRpdEZvcm0iLCJ1c2VyRGF0YSIsImJpbyIsImhhbmRsZVN1Ym1pdCIsInJlc2V0IiwicG9wdXBBZGRGb3JtIiwiZm9ybVZhbHVlIiwidGl0bGUiLCJyZW5kZXJDYXJkIiwicG9wdXBQcm9maWxlSW1hZ2UiLCJwb3B1cERlbGV0ZUJ1dHRvbiIsIl9kZWxldGVTdWJtaXQiLCJfZGVsZXRlU3VibWl0SGFuZGxlciIsIl9oYW5kbGVEZWxldGVTdWJtaXQiLCJmb2N1cyIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImhhbmRsZURlbGV0ZUJ1dHRvblN1Ym1pdCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImhhbmRsZUNhcmREZWxldGUiLCJjYXJkIiwicmVxdWVzdCIsInBvcHVwSW5zdGFuY2UiLCJmaW5hbGx5Il0sInNvdXJjZVJvb3QiOiIifQ==